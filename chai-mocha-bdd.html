<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Test Examples</title>
  <script src="//chaijs.com/chai.js"></script>
  <script src="//code.jquery.com/jquery-2.0.2.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/mocha/1.12.1/mocha.js"></script>
  <link href="//cdnjs.cloudflare.com/ajax/libs/mocha/1.13.0/mocha.css" rel="stylesheet" />

  <script src="main.js"></script>
</head>

<body>
  <div id="mocha"></div>
  <div id="qunit-fixture" style="display:none;">
    <div id="idMenuContainer"></div>
  </div>

  <!-- Framework setup -->
  <script>
    mocha.setup('bdd');
    mocha.reporter('html');
  </script>

  <!-- Test Suites -->
  <script>
    describe('main.js', function() {
      var expect = chai.expect,
        should = chai.should;


      describe('#buildMenuItem( interface )', function() {
        describe('-simple scenarios', function() {
          var data = {
            'name': 'Research Fault',
            'url': '#',
            'category': 'Line Technician',
            'icon': 'book'
          };
          var html = buildMenuItem(data).html();

          it("should contain the class 'icon-main'", function() {
            expect(html).to.contain("icon-main");
          });
          it("should contain the class 'fa' for Font-Awesome", function() {
            expect(html).to.contain("fa");
          });
        });


        describe('-search scenarios', function() {

          var data = {
            'name': 'Research Fault',
            'url': '#',
            'category': 'Line Technician',
            'type': 'search',
            'icon': 'book'
          };
          var html = buildMenuItem(data).html();
          it("expects class 'fa-search-plus' to exist on Search items", function() {
            expect(html).to.contain("fa-search-plus");
          });
        });

        describe('-failure scenarios', function() {

          function myError() {
            throw new Error("Bob");
          }

          function mySuccess() {;
          }

          it("should throw an error", function() {
            expect(myError).to.
            throw ();
          });
          it("should not throw an error", function() {
            expect(mySuccess).to.not.
            throw ();
          });

          it("should fail on malformed interface data", function() {
            expect(buildMenuItem).to.
            throw ();
          });
          it("should fail on malformed interface data", function() {
            try {
              buildMenuItem({});
              chai.assert.fail("An error should have been thrown");
            } catch (e) {
              // Success if error thrown
            }
          });
        });
      });

    });
  </script>

  <!-- Test execution -->
  <script>
    // Only tests run in real browser, injected script run if options.run == true
    if (navigator.userAgent.indexOf('PhantomJS') < 0) {
      mocha.run();
    }
  </script>

</body>

</html>